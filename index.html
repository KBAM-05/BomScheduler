<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš°ë¦¬ì•„ì´ ë§ì¶¤ ì£¼ê°„ ìŠ¤ì¼€ì¤„ëŸ¬</title>
    <link rel="manifest" href="/manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <!-- Chosen Palette: Soothing Harmony -->
    <!-- Application Structure Plan: ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë³µì¡í•œ ì£¼ê°„ ìŠ¤ì¼€ì¤„ì„ ì‚¬ìš©ìê°€ ì‰½ê²Œ ì†Œí™”í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ë©”ì¸ êµ¬ì¡°ëŠ” 'ìš”ì¼ë³„ íƒ­' ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ì—¬, ì‚¬ìš©ìê°€ íŠ¹ì • ìš”ì¼ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ì¼ì˜ ìƒì„¸ ì¼ì •ì„ ì¦‰ì‹œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë°©ì‹ì€ ê¸´ í…ìŠ¤íŠ¸ ë¬¸ì„œë¥¼ ìŠ¤í¬ë¡¤í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ë¹ ë¥´ê³  ì§ê´€ì ì¸ íƒìƒ‰ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤. ì¼ì •ì€ ì‹œê°ì  íƒ€ì„ë¼ì¸ í˜•íƒœë¡œ í‘œì‹œë˜ë©°, ê° í™œë™ì€ ì•„ì´ì½˜ê³¼ ìƒ‰ìƒìœ¼ë¡œ êµ¬ë¶„ë˜ì–´ ê°€ë…ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤. ë˜í•œ, ì£¼ê°„ ì „ì²´ì˜ í™œë™(ì¹˜ë£Œ, í•™ìŠµ, ë†€ì´ ë“±) ë¶„í¬ë¥¼ ë³´ì—¬ì£¼ëŠ” ë™ì  'ë§‰ëŒ€ ì°¨íŠ¸'ë¥¼ ì¶”ê°€í•˜ì—¬, ë¶€ëª¨ë‹˜ì´ ìŠ¤ì¼€ì¤„ì˜ ê· í˜•ì„ í•œëˆˆì— ë¶„ì„í•˜ê³  ì´í•´í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤. ì˜¤ë¥¸ìª½ì— 'ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ íƒìƒ‰' ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì—¬ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ìš”ì¼ì˜ ì¼ì •ì„ ë³„ë„ë¡œ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•˜ê³ , 'í™œë™ ë¶„ì„' ì„¹ì…˜ì—ì„œëŠ” ì£¼ê°„ ë° ì¼ê°„ í™œë™ ë¶„ì„ íƒ­ì„ í†µí•´ ê°ê° ë§‰ëŒ€ ì°¨íŠ¸ë¡œ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ë©°, ì£¼ê°„ ë¶„ì„ ì‹œ ì¹­ì°¬ ìŠ¤í‹°ì»¤ ë³´ìƒë„ í•¨ê»˜ í‘œì‹œí•©ë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” ì •ì  ì •ë³´ë¥¼ ë™ì ì´ê³  ë¶„ì„ì ì¸ ëŒ€ì‹œë³´ë“œë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤. -->
    <!-- Visualization & Content Choices: 
        - ì •ë³´: ìš”ì¼ë³„ ìƒì„¸ ìŠ¤ì¼€ì¤„ (ì‹¤ì‹œê°„) -> ëª©í‘œ: í˜„ì¬ ì§„í–‰ ìƒí™© ì•ˆë‚´ -> í‘œí˜„ ë°©ì‹: ì•„ì´ì½˜ í¬í•¨ ìˆ˜ì§ íƒ€ì„ë¼ì¸, ì‹¤ì‹œê°„ í•˜ì´ë¼ì´íŠ¸ -> ìƒí˜¸ì‘ìš©: ì²´í¬ë°•ìŠ¤ ì™„ë£Œ (í­ì£½, ë°•ìˆ˜ ì†Œë¦¬) -> ì •ë‹¹ì„±: ì‹¤ì‹œê°„ ë™ê¸° ë¶€ì—¬ ë° ì¦‰ê°ì ì¸ í”¼ë“œë°±.
        - ì •ë³´: ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ íƒìƒ‰ (ì„ íƒì ) -> ëª©í‘œ: íŠ¹ì • ìš”ì¼ ì¼ì • í™•ì¸ -> í‘œí˜„ ë°©ì‹: ìš”ì¼ íƒ­ + ì•„ì´ì½˜ í¬í•¨ ìˆ˜ì§ íƒ€ì„ë¼ì¸ -> ìƒí˜¸ì‘ìš©: ìš”ì¼ íƒ­ í´ë¦­ -> ì •ë‹¹ì„±: ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ë‚ ì˜ ìŠ¤ì¼€ì¤„ì„ í¸ë¦¬í•˜ê²Œ íƒìƒ‰.
        - ì •ë³´: ì£¼ê°„ í™œë™ ë¶„ì„ -> ëª©í‘œ: ì£¼ê°„ í™œë™ ë¶„í¬ íŒŒì•…, ì„±ê³¼ ì¸¡ì • -> í‘œí˜„ ë°©ì‹: ë§‰ëŒ€ ì°¨íŠ¸ (Canvas) + ì¹­ì°¬ ìŠ¤í‹°ì»¤ ê°œìˆ˜ -> ìƒí˜¸ì‘ìš©: 'ì£¼ê°„ í™œë™ ë¶„ì„' íƒ­ í´ë¦­ -> ì •ë‹¹ì„±: ì£¼ê°„ í™œë™ ìœ í˜•ë³„ ì‹œê°„ ë°°ë¶„ ë° ì„±ì·¨ë„ ì‹œê°í™”, ë³´ìƒ ì‹œìŠ¤í…œ í†µí•©.
        - ì •ë³´: ì¼ê°„ í™œë™ ë¶„ì„ -> ëª©í‘œ: íŠ¹ì • ì¼ì˜ í™œë™ êµ¬ì„± ì´í•´ -> í‘œí˜„ ë°©ì‹: ë§‰ëŒ€ ì°¨íŠ¸ (Canvas) -> ìƒí˜¸ì‘ìš©: 'ì¼ê°„ í™œë™ ë¶„ì„' íƒ­ í´ë¦­, 'ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ íƒìƒ‰' ìš”ì¼ ì„ íƒ ì‹œ ì—…ë°ì´íŠ¸ -> ì •ë‹¹ì„±: ì¼ë³„ ìŠ¤ì¼€ì¤„ì˜ ê· í˜•ì„ ìƒì„¸í•˜ê²Œ íŒŒì•….
        - ë¼ì´ë¸ŒëŸ¬ë¦¬: Tailwind CSS, Chart.js, Vanilla JS, Tone.js. SVG/Mermaid JSëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Chart height for bar charts */
            max-height: 400px;
        }
        .timeline-item {
            position: relative;
            padding-left: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 1.25rem;
            top: 1.25rem;
            bottom: -1.25rem;
            width: 2px;
            background-color: #EAEAEA;
            transform: translateX(-50%);
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .tab-active {
            background-color: #A4C3B2;
            color: white;
            font-weight: 700;
        }
        .tab-inactive {
            background-color: #F0F0F0;
            color: #6B7280;
        }
        .analysis-tab-active {
            background-color: #5F9EA0; /* Darker teal for analysis tabs */
            color: white;
            font-weight: 700;
        }
        .analysis-tab-inactive {
            background-color: #E0F2F7; /* Lighter blue for inactive analysis tabs */
            color: #3B666B;
        }
        .current-activity {
            background-color: #FFFBEB; /* ì—°í•œ ë…¸ë€ìƒ‰ ë°°ê²½ìœ¼ë¡œ ê°•ì¡° */
            border-left-color: #F59E0B; /* ê°•ì¡° í…Œë‘ë¦¬ ìƒ‰ìƒ */
            transform: scale(1.02); /* í˜„ì¬ í™œë™ì„ ì•½ê°„ í™•ëŒ€ */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* ê·¸ë¦¼ì ì¶”ê°€ */
            z-index: 10; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— ê²¹ì¹˜ë„ë¡ ì„¤ì • */
        }
        .completed-activity .activity-text {
            text-decoration: line-through;
            color: #9CA3AF;
        }
        #fireworksCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            pointer-events: none; /* í´ë¦­ ì´ë²¤íŠ¸ í†µê³¼ */
        }
        .activity-checkbox {
            min-width: 20px;
            min-height: 20px;
        }

        /* ì˜¤ëŠ˜ì˜ ì¼ì • ì„¹ì…˜ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ê²Œ ì¶”ê°€ */
        #schedule-content {
            max-height: 500px; /* ì ì ˆí•œ ë†’ì´ ì„¤ì • (ì¡°ì ˆ ê°€ëŠ¥) */
            overflow-y: auto;
            padding-right: 10px; /* ìŠ¤í¬ë¡¤ë°”ê°€ ë‚´ìš© ê°€ë¦¬ì§€ ì•Šë„ë¡ íŒ¨ë”© ì¶”ê°€ */
        }
    </style>
</head>
<body class="antialiased">

    <canvas id="fireworksCanvas"></canvas>

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-[#3B666B] mb-2">ìš°ë¦¬ì•„ì´ ë§ì¶¤ ì£¼ê°„ ìŠ¤ì¼€ì¤„ëŸ¬</h1>
            <p class="text-lg text-gray-600">ì•„ì´ì˜ í•˜ë£¨ë¥¼ ì‚¬ë‘ê³¼ ê³„íšìœ¼ë¡œ ì±„ì›Œì£¼ì„¸ìš”</p>
        </header>

        <main>
            <div class="lg:grid lg:grid-cols-3 lg:gap-8">
                
                <div class="lg:col-span-2">
                    <section id="daily-schedule" class="bg-white p-6 rounded-2xl shadow-lg mb-8">
                        <h2 class="text-2xl font-bold mb-4 text-[#3B666B]">ì˜¤ëŠ˜ì˜ ì¼ì •</h2>
                        <p class="text-gray-600 mb-6">í˜„ì¬ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ëŠ˜ í•´ì•¼ í•  í™œë™ì„ í™•ì¸í•˜ê³ , ì™„ë£Œ ì‹œ ì²´í¬ë°•ìŠ¤ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”!</p>
                        <!-- 'ì˜¤ëŠ˜ì˜ ì¼ì •' ìš”ì¼ íƒ­ ì œê±°ë¨ -->
                        <div id="schedule-content" class="space-y-6">
                            <!-- Today's dynamic schedule will be rendered here -->
                        </div>
                    </section>

                    <!-- í™œë™ ë¶„ì„ íƒ­ì„ 'ì˜¤ëŠ˜ì˜ ì¼ì •' ì„¹ì…˜ ë°”ë¡œ ì•„ë˜ë¡œ ì´ë™ -->
                    <section id="analysis-section" class="bg-white p-6 rounded-2xl shadow-lg mb-8 h-full">
                        <h2 class="text-2xl font-bold mb-4 text-[#3B666B]">í™œë™ ë¶„ì„</h2>
                        <div class="flex gap-2 mb-4">
                            <button id="weekly-analysis-tab" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 analysis-tab-active">ì£¼ê°„ í™œë™ ë¶„ì„</button>
                            <button id="daily-analysis-tab" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 analysis-tab-inactive">ì¼ê°„ í™œë™ ë¶„ì„</button>
                        </div>

                        <div id="weekly-analysis-content" class="analysis-content">
                            <p class="text-gray-600 mb-4 text-sm">ì´ë²ˆ ì£¼ í™œë™ë“¤ì´ ì–¼ë§ˆë‚˜ ê· í˜•ìˆê²Œ ë¶„í¬ë˜ì–´ ìˆëŠ”ì§€ ë§‰ëŒ€ ê·¸ë˜í”„ë¡œ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                            <div class="chart-container mb-4">
                                <canvas id="weeklyActivityChart"></canvas>
                            </div>
                            <div class="text-center bg-[#E0F2F7] p-3 rounded-lg border border-[#A4C3B2]">
                                <p class="text-lg font-bold text-[#3B666B]">ì´ <span id="total-activities-count-weekly">0</span>ê°œ í™œë™ ì¤‘ <span id="completed-activities-count-weekly">0</span>ê°œ ì™„ë£Œ!</p>
                                <p class="text-2xl font-extrabold text-[#F59E0B]">ì´ë²ˆ ì£¼ ì¹­ì°¬ ìŠ¤í‹°ì»¤: <span id="sticker-count-weekly" class="text-4xl">0</span>ê°œ ğŸ‰</p>
                            </div>
                        </div>

                        <div id="daily-analysis-content" class="analysis-content hidden">
                            <p class="text-gray-600 mb-4 text-sm"><span id="daily-analysis-day-desc">ì„ íƒëœ ìš”ì¼</span> í™œë™ë“¤ì˜ êµ¬ì„± ë¹„ìœ¨ì„ í¼ì„¼íŠ¸ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
                            <div class="chart-container">
                                <canvas id="dailyActivityChart"></canvas>
                            </div>
                        </div>
                    </section>

                    <!-- ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ íƒìƒ‰ ì„¹ì…˜ì´ ì™¼ìª½ í•˜ë‹¨ìœ¼ë¡œ ì´ë™ -->
                    <section id="explore-schedule-section" class="bg-white p-6 rounded-2xl shadow-lg mt-8">
                        <h2 class="text-2xl font-bold mb-4 text-[#3B666B]">ìš”ì¼ë³„ ìŠ¤ì¼€ì¤„ íƒìƒ‰</h2>
                        <p class="text-gray-600 mb-4 text-sm">ì›í•˜ëŠ” ìš”ì¼ì„ ì„ íƒí•˜ì—¬ í•´ë‹¹ì¼ì˜ ìƒì„¸ ìŠ¤ì¼€ì¤„ì„ ë¯¸ë¦¬ í™•ì¸í•´ë³´ì„¸ìš”.</p>
                        <div id="explore-day-tabs" class="flex flex-wrap gap-2 mb-6">
                            <!-- Explore day tabs will be rendered here -->
                        </div>
                        <div id="schedule-content-explore" class="space-y-4">
                            <!-- Selected day's schedule will be rendered here -->
                        </div>
                    </section>
                </div>
                
                <div class="lg:col-span-1 mt-8 lg:mt-0">
                    <!-- í˜„ì¬ ë‚ ì§œ ë° ì‹œê°„ í‘œì‹œ ì„¹ì…˜ ì¶”ê°€ -->
                    <section id="current-datetime-display" class="bg-white p-6 rounded-2xl shadow-lg h-full flex flex-col justify-center items-center">
                        <h2 class="text-2xl font-bold mb-4 text-[#3B666B]">í˜„ì¬ ë‚ ì§œ ë° ì‹œê°„</h2>
                        <p id="current-day-display" class="text-4xl font-extrabold text-[#F59E0B] mb-2"></p>
                        <p id="current-time-display" class="text-5xl font-extrabold text-[#3B666B]"></p>
                        <p class="text-gray-500 text-sm mt-4">ì•±ì„ ì¬ì‹œì‘í•˜ê±°ë‚˜ ìºì‹œë¥¼ ë¹„ì›Œì•¼ ìµœì‹  ì¼ì •ì´ ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    </section>
                </div>

            </div>
            
            <!-- ìŠ¤ì¼€ì¤„ ìš´ì˜ Tip ì„¹ì…˜ ì œê±°ë¨ -->
        </main>

    </div>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            let scheduleData = {
                'ì›”': [
                    // New morning schedules
                    { time: 'ì˜¤ì „ 7:40', activity: 'ê¸°ìƒ ë° ì•„ì¹¨ ì¤€ë¹„ ì‹œì‘', description: 'ì ì—ì„œ ê¹¨ì–´ë‚˜ í™œê¸°ì°¬ í•˜ë£¨ë¥¼ ì‹œì‘í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'â˜€ï¸', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:15', activity: 'í•™êµ ê°ˆ ì¤€ë¹„ (ì˜· ì…ê¸°, ì„¸ìˆ˜, ì–‘ì¹˜)', description: 'ìŠ¤ìŠ¤ë¡œ ì˜·ì„ ì…ê³  í•™êµ ê°ˆ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ‘•', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:45', activity: 'ì•„ì¹¨ ì‹ì‚¬', description: 'ì˜ì–‘ ê°€ë“í•œ ì•„ì¹¨ ì‹ì‚¬ë¡œ ì—ë„ˆì§€ë¥¼ ì±„ì›Œìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤ì „ 9:15', activity: 'ë“±êµ', description: 'í•™êµë¡œ ì¦ê²ê²Œ ì¶œë°œí•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ«', completed: false },
                    { time: 'ì˜¤í›„ 12:00', activity: 'ì ì‹¬ ì‹ì‚¬ (í•™êµ)', description: 'í•™êµì—ì„œ ì¹œêµ¬ë“¤ê³¼ ë§›ìˆëŠ” ì ì‹¬ì„ ë¨¹ì–´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ±', completed: false },
                    { time: 'ì˜¤í›„ 3:00', activity: 'í•˜êµ ë° ê°„ì‹', description: 'í•™êµì—ì„œ ëŒì•„ì™€ ê°„ì‹ì„ ë¨¹ê³  íœ´ì‹í•´ìš”.', category: 'íœ´ì‹', icon: 'ğŸ', completed: false },
                    { time: 'ì˜¤í›„ 5:00', activity: 'ì§‘ ë„ì°©, íœ´ì‹ ë° ììœ  ë†€ì´', description: 'ê°„ì‹ì„ ë¨¹ê³ , ì•„ì´ê°€ ì›í•˜ëŠ” ë†€ì´ë¥¼ í•˜ë©° í¸ì•ˆí•œ ì‹œê°„ì„ ë³´ë‚´ìš”.', category: 'íœ´ì‹', icon: 'ğŸ ', completed: false },
                    { time: 'ì˜¤í›„ 5:30', activity: 'ê°œë³„ í•™ìŠµ: í•œê¸€', description: 'ë§¤ì¼ ê¾¸ì¤€íˆ í•œê¸€ì„ ìµíˆëŠ” ì‹œê°„ì´ì—ìš”.', category: 'í•™ìŠµ', icon: 'ğŸ“š', completed: false },
                    { time: 'ì˜¤í›„ 6:00', activity: 'ì €ë… ì‹ì‚¬ ì¤€ë¹„ ë•ê¸°', description: 'ì‹ì‚¬ ì¤€ë¹„ë¥¼ ë„ìš°ë©° ì±…ì„ê°ì„ ê¸¸ëŸ¬ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤í›„ 6:30', activity: 'ì €ë… ì‹ì‚¬', description: 'ì˜¨ ê°€ì¡±ì´ í•¨ê»˜ ì¦ê±°ìš´ ì‹ì‚¬ ì‹œê°„ì„ ê°€ì ¸ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤í›„ 7:30', activity: 'í•¨ê»˜ ì±… ì½ê¸°', description: 'ì•„ì´ì˜ ìƒìƒë ¥ì„ ìê·¹í•˜ëŠ” ì¬ë¯¸ìˆëŠ” ì±…ì„ í•¨ê»˜ ì½ì–´ìš”.', category: 'ë…ì„œ', icon: 'ğŸ“–', completed: false },
                    { time: 'ì˜¤í›„ 8:00', activity: 'ììœ  ë†€ì´ ë° íœ´ì‹', description: 'ì•„ì´ê°€ ì¢‹ì•„í•˜ëŠ” í™œë™ìœ¼ë¡œ í•˜ë£¨ë¥¼ ì¦ê²ê²Œ ë§ˆë¬´ë¦¬í•´ìš”.', category: 'ë†€ì´', icon: 'ğŸ‰', completed: false },
                    { time: 'ì˜¤í›„ 9:00', activity: 'ë‚´ì¼ ì¤€ë¹„ë¬¼ ì±™ê¸°ê¸°', description: 'ë‚´ì¼ í•„ìš”í•œ ë¬¼ê±´ë“¤ì„ ë¯¸ë¦¬ ì±™ê²¨ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ’', completed: false },
                    { time: 'ì˜¤í›„ 9:30', activity: 'ì·¨ì¹¨ ì¤€ë¹„', description: 'ë‚´ì¼ì„ ìœ„í•´ ì°¨ë¶„í•˜ê²Œ ì ìë¦¬ì— ë“¤ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ì”»ê¸°', completed: false },
                    { time: 'ì˜¤í›„ 10:00', activity: 'ì·¨ì¹¨', description: 'í¸ì•ˆí•˜ê²Œ ì ìë¦¬ì— ë“¤ ì‹œê°„ì´ì—ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ˜´', completed: false },
                ],
                'í™”': [
                    // New morning schedules
                    { time: 'ì˜¤ì „ 7:40', activity: 'ê¸°ìƒ ë° ì•„ì¹¨ ì¤€ë¹„ ì‹œì‘', description: 'ì ì—ì„œ ê¹¨ì–´ë‚˜ í™œê¸°ì°¬ í•˜ë£¨ë¥¼ ì‹œì‘í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'â˜€ï¸', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:15', activity: 'í•™êµ ê°ˆ ì¤€ë¹„ (ì˜· ì…ê¸°, ì„¸ìˆ˜, ì–‘ì¹˜)', description: 'ìŠ¤ìŠ¤ë¡œ ì˜·ì„ ì…ê³  í•™êµ ê°ˆ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ‘•', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:45', activity: 'ì•„ì¹¨ ì‹ì‚¬', description: 'ì˜ì–‘ ê°€ë“í•œ ì•„ì¹¨ ì‹ì‚¬ë¡œ ì—ë„ˆì§€ë¥¼ ì±„ì›Œìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤ì „ 9:15', activity: 'ë“±êµ', description: 'í•™êµë¡œ ì¦ê²ê²Œ ì¶œë°œí•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ«', completed: false },
                    { time: 'ì˜¤í›„ 12:00', activity: 'ì ì‹¬ ì‹ì‚¬ (í•™êµ)', description: 'í•™êµì—ì„œ ì¹œêµ¬ë“¤ê³¼ ë§›ìˆëŠ” ì ì‹¬ì„ ë¨¹ì–´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ±', completed: false },
                    { time: 'ì˜¤í›„ 3:00', activity: 'í•˜êµ ë° ê°„ì‹', description: 'í•™êµì—ì„œ ëŒì•„ì™€ ê°„ì‹ì„ ë¨¹ê³  íœ´ì‹í•´ìš”.', category: 'íœ´ì‹', icon: 'ğŸ', completed: false },
                    { time: 'ì˜¤í›„ 5:00', activity: 'ì§‘ ë„ì°©, ê°„ì‹ ë° íœ´ì‹', description: 'í•™êµ ë‹¤ë…€ì˜¨ í›„ ì¶©ë¶„íˆ ì‰¬ëŠ” ì‹œê°„ì„ ê°€ì ¸ìš”.', category: 'íœ´ì‹', icon: 'ğŸ ', completed: false },
                    { time: 'ì˜¤í›„ 5:30', activity: 'ìŒì•… ê°ìƒ ë° ë¦¬ë“¬ ë†€ì´', description: 'ë‹¤ì–‘í•œ ìŒì•…ì„ ë“£ê³  ë¦¬ë“¬ì„ ëŠê»´ë´ìš”.', category: 'ë†€ì´', icon: 'ğŸ¶', completed: false },
                    { time: 'ì˜¤í›„ 6:00', activity: 'ê°œë³„ í•™ìŠµ: ìˆ˜í•™', description: 'ìˆ«ìì™€ ë„í˜•ì„ ì¬ë¯¸ìˆê²Œ ë°°ì›Œìš”.', category: 'í•™ìŠµ', icon: 'ğŸ“š', completed: false },
                    { time: 'ì˜¤í›„ 6:30', activity: 'ì €ë… ì‹ì‚¬', description: 'ë§›ìˆëŠ” ì €ë…ì„ ë¨¹ìœ¼ë©° ë„ë€ë„ë€ ì´ì•¼ê¸°í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤í›„ 7:30', activity: 'í•œê¸€/ìˆ˜í•™ ìˆ˜ì—… (ì™¸ë¶€)', description: 'ì™¸ë¶€ ìˆ˜ì—…ì— ì°¸ì—¬í•˜ë©° ìƒˆë¡œìš´ ê²ƒì„ ë°°ì›Œìš”.', category: 'ì™¸ë¶€ìˆ˜ì—…', icon: 'ğŸ«', completed: false },
                    { time: 'ì˜¤í›„ 8:30', activity: 'ìˆ˜ì—… í›„ íœ´ì‹ ë° ììœ  ë†€ì´', description: 'ìˆ˜ì—…ìœ¼ë¡œ ì§€ì¹œ ëª¸ê³¼ ë§ˆìŒì„ ì‰¬ê²Œ í•´ì¤˜ìš”.', category: 'ë†€ì´', icon: 'ğŸ‰', completed: false },
                    { time: 'ì˜¤í›„ 9:00', activity: 'ë‚´ì¼ í•™ìŠµ ì¤€ë¹„ë¬¼ í™•ì¸', description: 'ë‚´ì¼ í•„ìš”í•œ í•™ìŠµ ë„êµ¬ë¥¼ í™•ì¸í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ“', completed: false },
                    { time: 'ì˜¤í›„ 9:30', activity: 'ì·¨ì¹¨ ì¤€ë¹„', description: 'ë‚´ì¼ì„ ìœ„í•´ ì°¨ë¶„í•˜ê²Œ ì ìë¦¬ì— ë“¤ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ì”»ê¸°', completed: false },
                    { time: 'ì˜¤í›„ 10:00', activity: 'ì·¨ì¹¨', description: 'í¸ì•ˆí•˜ê²Œ ì ìë¦¬ì— ë“¤ ì‹œê°„ì´ì—ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ˜´', completed: false },
                ],
                'ìˆ˜': [
                    // New morning schedules
                    { time: 'ì˜¤ì „ 7:40', activity: 'ê¸°ìƒ ë° ì•„ì¹¨ ì¤€ë¹„ ì‹œì‘', description: 'ì ì—ì„œ ê¹¨ì–´ë‚˜ í™œê¸°ì°¬ í•˜ë£¨ë¥¼ ì‹œì‘í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'â˜€ï¸', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:15', activity: 'í•™êµ ê°ˆ ì¤€ë¹„ (ì˜· ì…ê¸°, ì„¸ìˆ˜, ì–‘ì¹˜)', description: 'ìŠ¤ìŠ¤ë¡œ ì˜·ì„ ì…ê³  í•™êµ ê°ˆ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ‘•', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:45', activity: 'ì•„ì¹¨ ì‹ì‚¬', description: 'ì˜ì–‘ ê°€ë“í•œ ì•„ì¹¨ ì‹ì‚¬ë¡œ ì—ë„ˆì§€ë¥¼ ì±„ì›Œìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤ì „ 9:15', activity: 'ë“±êµ', description: 'í•™êµë¡œ ì¦ê²ê²Œ ì¶œë°œí•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ«', completed: false },
                    { time: 'ì˜¤í›„ 12:00', activity: 'ì ì‹¬ ì‹ì‚¬ (í•™êµ)', description: 'í•™êµì—ì„œ ì¹œêµ¬ë“¤ê³¼ ë§›ìˆëŠ” ì ì‹¬ì„ ë¨¹ì–´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ±', completed: false },
                    { time: 'ì˜¤í›„ 3:00', activity: 'í•˜êµ ë° ê°„ì‹', description: 'í•™êµì—ì„œ ëŒì•„ì™€ ê°„ì‹ì„ ë¨¹ê³  íœ´ì‹í•´ìš”.', category: 'íœ´ì‹', icon: 'ğŸ', completed: false },
                    { time: 'ì˜¤í›„ 4:30', activity: 'í†µí•© ê°ê° ì¹˜ë£Œ (ì™¸ë¶€)', description: 'ì¹˜ë£Œë¥¼ í†µí•´ ë‹¤ì–‘í•œ ê°ê°ì„ ê²½í—˜í•˜ê³  ë°œë‹¬ì‹œì¼œìš”.', category: 'ì¹˜ë£Œ', icon: 'ğŸ§ ', completed: false },
                    { time: 'ì˜¤í›„ 5:30', activity: 'ì§‘ ë„ì°© ë° íœ´ì‹', description: 'ì¹˜ë£Œ í›„ ì§‘ì— ì™€ì„œ í¸ì•ˆí•˜ê²Œ ì‰¬ì–´ìš”.', category: 'íœ´ì‹', icon: 'ğŸ ', completed: false },
                    { time: 'ì˜¤í›„ 6:00', activity: 'ê°œë³„ í•™ìŠµ: ì˜ì–´ ë‹¨ì–´', description: 'ì¬ë¯¸ìˆëŠ” ê·¸ë¦¼ê³¼ í•¨ê»˜ ì˜ì–´ ë‹¨ì–´ë¥¼ ìµí˜€ìš”.', category: 'í•™ìŠµ', icon: 'ğŸ“š', completed: false },
                    { time: 'ì˜¤í›„ 6:30', activity: 'ì €ë… ì‹ì‚¬', description: 'ì—ë„ˆì§€ë¥¼ ë³´ì¶©í•˜ëŠ” ì¦ê±°ìš´ ì €ë… ì‹œê°„ì´ì—ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤í›„ 7:30', activity: 'ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë“œê²Œì„', description: 'ë³´ë“œê²Œì„ì„ í•˜ë©° ê°€ì¡±ê³¼ ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ë‚´ìš”.', category: 'ë†€ì´', icon: 'ğŸ²', completed: false },
                    { time: 'ì˜¤í›„ 8:10', activity: 'í•¨ê»˜ ì±… ì½ê¸° ë˜ëŠ” ê°€ë²¼ìš´ ë†€ì´', description: 'ì°¨ë¶„í•œ í™œë™ìœ¼ë¡œ í•˜ë£¨ë¥¼ ì •ë¦¬í•´ìš”.', category: 'ë…ì„œ', icon: 'ğŸ“–', completed: false },
                    { time: 'ì˜¤í›„ 9:00', activity: 'ê°œì¸ ìœ„ìƒ ê´€ë¦¬', description: 'ì–‘ì¹˜, ì„¸ìˆ˜ ë“± ìŠ¤ìŠ¤ë¡œ ìœ„ìƒì„ ê´€ë¦¬í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸª¥', completed: false },
                    { time: 'ì˜¤í›„ 9:30', activity: 'ì·¨ì¹¨ ì¤€ë¹„', description: 'ë‚´ì¼ì„ ìœ„í•´ ì°¨ë¶„í•˜ê²Œ ì ìë¦¬ì— ë“¤ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ì”»ê¸°', completed: false },
                    { time: 'ì˜¤í›„ 10:00', activity: 'ì·¨ì¹¨', description: 'í¸ì•ˆí•˜ê²Œ ì ìë¦¬ì— ë“¤ ì‹œê°„ì´ì—ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ˜´', completed: false },
                ],
                'ëª©': [
                    // New morning schedules
                    { time: 'ì˜¤ì „ 7:40', activity: 'ê¸°ìƒ ë° ì•„ì¹¨ ì¤€ë¹„ ì‹œì‘', description: 'ì ì—ì„œ ê¹¨ì–´ë‚˜ í™œê¸°ì°¬ í•˜ë£¨ë¥¼ ì‹œì‘í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'â˜€ï¸', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:15', activity: 'í•™êµ ê°ˆ ì¤€ë¹„ (ì˜· ì…ê¸°, ì„¸ìˆ˜, ì–‘ì¹˜)', description: 'ìŠ¤ìŠ¤ë¡œ ì˜·ì„ ì…ê³  í•™êµ ê°ˆ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ‘•', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:45', activity: 'ì•„ì¹¨ ì‹ì‚¬', description: 'ì˜ì–‘ ê°€ë“í•œ ì•„ì¹¨ ì‹ì‚¬ë¡œ ì—ë„ˆì§€ë¥¼ ì±„ì›Œìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤ì „ 9:15', activity: 'ë“±êµ', description: 'í•™êµë¡œ ì¦ê²ê²Œ ì¶œë°œí•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ«', completed: false },
                    { time: 'ì˜¤í›„ 12:00', activity: 'ì ì‹¬ ì‹ì‚¬ (í•™êµ)', description: 'í•™êµì—ì„œ ì¹œêµ¬ë“¤ê³¼ ë§›ìˆëŠ” ì ì‹¬ì„ ë¨¹ì–´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ±', completed: false },
                    { time: 'ì˜¤í›„ 3:00', activity: 'í•˜êµ ë° ê°„ì‹', description: 'í•™êµì—ì„œ ëŒì•„ì™€ ê°„ì‹ì„ ë¨¹ê³  íœ´ì‹í•´ìš”.', category: 'íœ´ì‹', icon: 'ğŸ', completed: false },
                    { time: 'ì˜¤í›„ 4:00', activity: 'ì¸ì§€ ì¹˜ë£Œ (ì™¸ë¶€)', description: 'ìƒê°í•˜ëŠ” í˜ì„ ê¸°ë¥´ëŠ” ì¦ê±°ìš´ ì¹˜ë£Œ ì‹œê°„ì´ì—ìš”.', category: 'ì¹˜ë£Œ', icon: 'ğŸ§ ', completed: false },
                    { time: 'ì˜¤í›„ 5:00', activity: 'ì§‘ ë„ì°© ë° íœ´ì‹', description: 'ì¹˜ë£Œ í›„ ì§‘ì— ì™€ì„œ í¸ì•ˆí•˜ê²Œ ì‰¬ì–´ìš”.', category: 'íœ´ì‹', icon: 'ğŸ ', completed: false },
                    { time: 'ì˜¤í›„ 5:30', activity: 'ë¯¸ìˆ  í™œë™', description: 'í¬ë ˆìš©, ë¬¼ê°ìœ¼ë¡œ ììœ ë¡­ê²Œ í‘œí˜„í•´ìš”.', category: 'ë†€ì´', icon: 'ğŸ¨', completed: false },
                    { time: 'ì˜¤í›„ 6:00', activity: 'ê°œë³„ í•™ìŠµ: ê³¼í•™ íƒêµ¬', description: 'ê°„ë‹¨í•œ ê³¼í•™ ì‹¤í—˜ìœ¼ë¡œ í˜¸ê¸°ì‹¬ì„ í‚¤ì›Œìš”.', category: 'í•™ìŠµ', icon: 'ğŸ”¬', completed: false },
                    { time: 'ì˜¤í›„ 6:30', activity: 'ì €ë… ì‹ì‚¬', description: 'ë§›ìˆëŠ” ì €ë…ìœ¼ë¡œ ì—ë„ˆì§€ë¥¼ ì±„ì›Œìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤í›„ 7:30', activity: 'í•œê¸€/ìˆ˜í•™ ìˆ˜ì—… (ì™¸ë¶€)', description: 'ì™¸ë¶€ ìˆ˜ì—…ì„ í†µí•´ ì¦ê²ê²Œ ë°°ì›Œìš”.', category: 'ì™¸ë¶€ìˆ˜ì—…', icon: 'ğŸ«', completed: false },
                    { time: 'ì˜¤í›„ 8:30', activity: 'ììœ  ë†€ì´ ì‹œê°„', description: 'ì•„ì´ê°€ ì›í•˜ëŠ” ë†€ì´ë¥¼ í•˜ë©° ë§ˆìŒê» ìƒìƒë ¥ì„ í¼ì³ìš”.', category: 'ë†€ì´', icon: 'ğŸ‰', completed: false },
                    { time: 'ì˜¤í›„ 9:00', activity: 'ì˜· ì •ë¦¬í•˜ê¸°', description: 'ë²—ì€ ì˜·ì„ ìŠ¤ìŠ¤ë¡œ ì •ë¦¬í•˜ëŠ” ì—°ìŠµì„ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ‘•', completed: false },
                    { time: 'ì˜¤í›„ 9:30', activity: 'ì·¨ì¹¨ ì¤€ë¹„', description: 'ë‚´ì¼ì„ ìœ„í•´ ì°¨ë¶„í•˜ê²Œ ì ìë¦¬ì— ë“¤ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ì”»ê¸°', completed: false },
                    { time: 'ì˜¤í›„ 10:00', activity: 'ì·¨ì¹¨', description: 'í¸ì•ˆí•˜ê²Œ ì ìë¦¬ì— ë“¤ ì‹œê°„ì´ì—ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ˜´', completed: false },
                ],
                'ê¸ˆ': [
                    // New morning schedules
                    { time: 'ì˜¤ì „ 7:40', activity: 'ê¸°ìƒ ë° ì•„ì¹¨ ì¤€ë¹„ ì‹œì‘', description: 'ì ì—ì„œ ê¹¨ì–´ë‚˜ í™œê¸°ì°¬ í•˜ë£¨ë¥¼ ì‹œì‘í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'â˜€ï¸', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:15', activity: 'í•™êµ ê°ˆ ì¤€ë¹„ (ì˜· ì…ê¸°, ì„¸ìˆ˜, ì–‘ì¹˜)', description: 'ìŠ¤ìŠ¤ë¡œ ì˜·ì„ ì…ê³  í•™êµ ê°ˆ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ‘•', completed: false, persistentAlert: true },
                    { time: 'ì˜¤ì „ 8:45', activity: 'ì•„ì¹¨ ì‹ì‚¬', description: 'ì˜ì–‘ ê°€ë“í•œ ì•„ì¹¨ ì‹ì‚¬ë¡œ ì—ë„ˆì§€ë¥¼ ì±„ì›Œìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤ì „ 9:15', activity: 'ë“±êµ', description: 'í•™êµë¡œ ì¦ê²ê²Œ ì¶œë°œí•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ«', completed: false },
                    { time: 'ì˜¤í›„ 12:00', activity: 'ì ì‹¬ ì‹ì‚¬ (í•™êµ)', description: 'í•™êµì—ì„œ ì¹œêµ¬ë“¤ê³¼ ë§›ìˆëŠ” ì ì‹¬ì„ ë¨¹ì–´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ±', completed: false },
                    { time: 'ì˜¤í›„ 3:00', activity: 'í•˜êµ ë° ê°„ì‹', description: 'í•™êµì—ì„œ ëŒì•„ì™€ ê°„ì‹ì„ ë¨¹ê³  íœ´ì‹í•´ìš”.', category: 'íœ´ì‹', icon: 'ğŸ', completed: false },
                    { time: 'ì˜¤í›„ 5:00', activity: 'ì‚¬íšŒì„± ìˆ˜ì—… (ì™¸ë¶€)', description: 'ì¹œêµ¬ë“¤ê³¼ ì–´ìš¸ë¦¬ëŠ” ë°©ë²•ì„ ë°°ìš°ëŠ” ì‹œê°„ì´ì—ìš”.', category: 'ì¹˜ë£Œ', icon: 'ğŸ§‘â€ğŸ¤â€ğŸ§‘', completed: false },
                    { time: 'ì˜¤í›„ 6:00', activity: 'í‚¤ì¦ˆì¹´í˜ì—ì„œ ì‹ ë‚˜ê²Œ ë†€ê¸°', description: 'ì—ë„ˆì§€ë¥¼ ë°œì‚°í•˜ë©° ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ë‚´ìš”.', category: 'ë†€ì´', icon: 'ğŸ¤¸', completed: false },
                    { time: 'ì˜¤í›„ 7:00', activity: 'ê°„ì‹ ë° ììœ ì‹œê°„', description: 'ì‹ ë‚˜ê²Œ ë†€ê³  ì™€ì„œ ê°„ë‹¨í•œ ê°„ì‹ì„ ë¨¹ì–´ìš”.', category: 'íœ´ì‹', icon: 'ğŸ', completed: false },
                    { time: 'ì˜¤í›„ 7:30', activity: 'ì§‘ ë„ì°© ë° ì €ë… ì‹ì‚¬', description: 'ì‹ ë‚˜ê²Œ ë†€ê³  ì™€ì„œ ë¨¹ëŠ” ì €ë…ì€ ê¿€ë§›ì´ì—ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤í›„ 8:30', activity: 'í•¨ê»˜ ì±… ì½ê¸° ë˜ëŠ” ê°€ë²¼ìš´ í™œë™', description: 'í¥ë¶„ëœ ë§ˆìŒì„ ê°€ë¼ì•‰íˆê³  ì°¨ë¶„í•˜ê²Œ í•˜ë£¨ë¥¼ ë§ˆë¬´ë¦¬í•´ìš”.', category: 'ë…ì„œ', icon: 'ğŸ“–', completed: false },
                    { time: 'ì˜¤í›„ 9:00', activity: 'ì£¼ë§ ê³„íš ì´ì•¼ê¸°í•˜ê¸°', description: 'ì£¼ë§ì— ë¬´ì—‡ì„ í• ì§€ í•¨ê»˜ ì´ì•¼ê¸° ë‚˜ëˆ ìš”.', category: 'ë†€ì´', icon: 'ğŸ—“ï¸', completed: false },
                    { time: 'ì˜¤í›„ 9:30', activity: 'ì·¨ì¹¨ ì¤€ë¹„', description: 'ë‚´ì¼ì„ ìœ„í•´ ì°¨ë¶„í•˜ê²Œ ì ìë¦¬ì— ë“¤ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ì”»ê¸°', completed: false },
                    { time: 'ì˜¤í›„ 10:00', activity: 'ì·¨ì¹¨', description: 'í¸ì•ˆí•˜ê²Œ ì ìë¦¬ì— ë“¤ ì‹œê°„ì´ì—ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ˜´', completed: false },
                ],
                'í† ': [
                    { time: 'ì˜¤ì „ 9:00', activity: 'ê¸°ìƒ ë° ì•„ì¹¨ ì‹ì‚¬', description: 'ì£¼ë§ ì•„ì¹¨, ìƒì¾Œí•˜ê²Œ ì‹œì‘í•´ìš”!', category: 'ê¸°ë³¸ìƒí™œ', icon: 'â˜€ï¸', completed: false },
                    { time: 'ì˜¤ì „ 10:00', activity: 'ì§§ì€ 1:1 í•™ìŠµ (30-40ë¶„)', description: 'ì£¼ì¤‘ì— ë¶€ì¡±í–ˆë˜ ë¶€ë¶„ì„ ì¬ë¯¸ìˆëŠ” ë†€ì´ì²˜ëŸ¼ í•™ìŠµí•´ìš”.', category: 'í•™ìŠµ', icon: 'ğŸ“š', completed: false },
                    { time: 'ì˜¤ì „ 10:40', activity: 'í•¨ê»˜ ì±… ì½ê¸°', description: 'í¥ë¯¸ë¡œìš´ ì´ì•¼ê¸°ë¥¼ í•¨ê»˜ ì½ìœ¼ë©° ìƒìƒë ¥ì„ í‚¤ì›Œìš”.', category: 'ë…ì„œ', icon: 'ğŸ“–', completed: false },
                    { time: 'ì˜¤ì „ 11:30', activity: 'ììœ  ë†€ì´ ë˜ëŠ” ì•¼ì™¸ í™œë™', description: 'ì•„ì´ê°€ ì¢‹ì•„í•˜ëŠ” ë†€ì´ë¥¼ í•˜ê±°ë‚˜, ê°€ê¹Œìš´ ê³µì›ì—ì„œ ì‹ ì²´ í™œë™ì„ ì¦ê²¨ìš”.', category: 'ë†€ì´', icon: 'ğŸª', completed: false },
                    { time: 'ì˜¤í›„ 12:30', activity: 'ì ì‹¬ ì‹ì‚¬', description: 'ë§›ìˆëŠ” ì ì‹¬ì„ ë¨¹ê³  ì—ë„ˆì§€ë¥¼ ì¶©ì „í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤í›„ 2:00', activity: 'ë¶€ëª¨ë‹˜ê³¼ íŠ¹ë³„ í™œë™/ì¹˜ë£Œ í›ˆë ¨', description: 'ì•„ì´ì—ê²Œ í•„ìš”í•œ ë§ì¶¤í˜• í›ˆë ¨(ì†Œê·¼ìœ¡, ì¸ì§€, ì–¸ì–´ ë“±)ì„ ë†€ì´ì²˜ëŸ¼ ì§„í–‰í•˜ê±°ë‚˜, í•¨ê»˜ íŠ¹ë³„í•œ í™œë™ì„ í•´ìš”.', category: 'ì¹˜ë£Œ', icon: 'ğŸ§©', completed: false },
                    { time: 'ì˜¤í›„ 3:00', activity: 'ììœ  ë†€ì´ ë° ê°„ì‹', description: 'í™œë™ í›„ ììœ ë¡­ê²Œ ë†€ë©° ê°„ì‹ì„ ë¨¹ì–´ìš”.', category: 'ë†€ì´', icon: 'ğŸ¦', completed: false },
                    { time: 'ì˜¤í›„ 4:00', activity: 'ì§‘ ì•ˆ ì •ë¦¬ ë•ê¸°', description: 'ì¥ë‚œê°ì´ë‚˜ ì±…ì„ ì •ë¦¬í•˜ë©° ì²­ê²° ìŠµê´€ì„ ê¸¸ëŸ¬ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ§¹', completed: false },
                    { time: 'ì˜¤í›„ 5:00', activity: 'ê°€ì¡±ê³¼ í•¨ê»˜í•˜ëŠ” ì‹œê°„', description: 'ë³´ë“œê²Œì„, ì˜í™” ë³´ê¸°, ëŒ€í™” ë“± ê°€ì¡±ê³¼ ì¦ê±°ìš´ ì‹œê°„ì„ ë³´ë‚´ìš”.', category: 'ë†€ì´', icon: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', completed: false },
                    { time: 'ì˜¤í›„ 6:00', activity: 'í•˜ë£¨ ì¼ê³¼ ëŒì•„ë³´ê¸°', description: 'ì˜¤ëŠ˜ ë¬´ì—‡ì„ í–ˆëŠ”ì§€ ì´ì•¼ê¸° ë‚˜ëˆ„ë©° í•˜ë£¨ë¥¼ ë§ˆë¬´ë¦¬í•´ìš”.', category: 'ë…ì„œ', icon: 'ğŸ’¬', completed: false },
                    { time: 'ì˜¤í›„ 6:30', activity: 'ì €ë… ì‹ì‚¬', description: 'ì£¼ë§ ì €ë…ì€ íŠ¹ë³„í•œ ë©”ë‰´ë¡œ ì¦ê²ê²Œ!', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸœ', completed: false },
                    { time: 'ì˜¤í›„ 7:30', activity: 'ë‚´ì¼ ì£¼ê°„ ìŠ¤ì¼€ì¤„ ë¯¸ë¦¬ ë³´ê¸°', description: 'ë‹¤ìŒ ì£¼ ìŠ¤ì¼€ì¤„ì„ ë¯¸ë¦¬ ë³´ë©° ìƒˆë¡œìš´ í•œ ì£¼ë¥¼ ì¤€ë¹„í•´ìš”.', category: 'í•™ìŠµ', icon: 'ğŸ“…', completed: false },
                    { time: 'ì˜¤í›„ 8:00', activity: 'íœ´ì‹ ë° ì·¨ì¹¨ ì¤€ë¹„', description: 'í•˜ë£¨ë¥¼ ë§ˆë¬´ë¦¬í•˜ë©° í¸ì•ˆí•˜ê²Œ ì‰¬ê³  ì ìë¦¬ì— ë“¤ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ì”»ê¸°', completed: false },
                    { time: 'ì˜¤í›„ 9:00', activity: 'ì·¨ì¹¨', description: 'ë‚´ì¼ì„ ìœ„í•´ ì¼ì° ì ìë¦¬ì— ë“¤ì–´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ˜´', completed: false }
                ],
                'ì¼': [
                    { time: 'ì˜¤ì „ 9:00', activity: 'ëŠ¦ì  ë° ììœ  ê¸°ìƒ', description: 'ì£¼ë§ ì•„ì¹¨ì€ ì¢€ ë” ì—¬ìœ ë¡­ê²Œ ì¦ê²¨ìš”!', category: 'íœ´ì‹', icon: 'ğŸ›Œ', completed: false },
                    { time: 'ì˜¤ì „ 9:45', activity: 'ì•„ì¹¨ ì‹ì‚¬ ë° ì¤€ë¹„', description: 'ê°„ë‹¨í•˜ê³  ë§›ìˆëŠ” ì•„ì¹¨ ì‹ì‚¬ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤ì „ 10:30', activity: 'ê°€ë²¼ìš´ ì‹ ì²´ í™œë™', description: 'ì‚°ì±…ì´ë‚˜ ì‹¤ë‚´ ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ëª¸ì„ ì›€ì§ì—¬ìš”.', category: 'ë†€ì´', icon: 'ğŸƒ', completed: false },
                    { time: 'ì˜¤ì „ 11:30', activity: 'ììœ  ë†€ì´ ì‹œê°„', description: 'ì•„ì´ê°€ ì›í•˜ëŠ” ë†€ì´ë¥¼ ììœ ë¡­ê²Œ ì„ íƒí•´ìš”.', category: 'ë†€ì´', icon: 'ğŸ§©', completed: false },
                    { time: 'ì˜¤í›„ 12:30', activity: 'ì ì‹¬ ì‹ì‚¬', description: 'ì˜¨ ê°€ì¡±ì´ í•¨ê»˜ ì¦ê±°ìš´ ì ì‹¬ ì‹ì‚¬ ì‹œê°„ì´ì—ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ½ï¸', completed: false },
                    { time: 'ì˜¤í›„ 2:00', activity: 'ì£¼ê°„ í™œë™ ë³µìŠµ', description: 'ì´ë²ˆ ì£¼ì— ë°°ìš´ ê²ƒë“¤ì„ ê°€ë³ê²Œ ë³µìŠµí•˜ê±°ë‚˜, ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•´ìš”.', category: 'í•™ìŠµ', icon: 'ğŸ“', completed: false },
                    { time: 'ì˜¤í›„ 3:00', activity: 'ë¯¸ìˆ  ë˜ëŠ” ì°½ì‘ í™œë™', description: 'ë‹¤ì–‘í•œ ì¬ë£Œë¡œ ì°½ì˜ë ¥ì„ í‘œí˜„í•˜ëŠ” ì‹œê°„ì´ì—ìš”.', category: 'ë†€ì´', icon: 'ğŸ¨', completed: false },
                    { time: 'ì˜¤í›„ 4:00', activity: 'ììœ  ë†€ì´ ë° ê°„ì‹', description: 'ììœ ë¡­ê²Œ ë†€ê³  ë§›ìˆëŠ” ê°„ì‹ì„ ë¨¹ì–´ìš”.', category: 'ë†€ì´', icon: 'ğŸª', completed: false },
                    { time: 'ì˜¤í›„ 5:00', activity: 'ê°€ì¡±ê³¼ í•¨ê»˜í•˜ëŠ” íŠ¹ë³„ ì‹œê°„', description: 'ì˜í™” ì‹œì²­, ê³µì› ë‚˜ë“¤ì´ ë“± ê°€ì¡±ê³¼ íŠ¹ë³„í•œ ì‹œê°„ì„ ë³´ë‚´ìš”.', category: 'ë†€ì´', icon: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', completed: false },
                    { time: 'ì˜¤í›„ 6:00', activity: 'ë‹¤ìŒ ì£¼ ê³„íš ì´ì•¼ê¸°í•˜ê¸°', description: 'ë‹¤ìŒ ì£¼ ìŠ¤ì¼€ì¤„ì— ëŒ€í•´ ì´ì•¼ê¸° ë‚˜ëˆ„ê³  ê¸°ëŒ€ê°ì„ ê°€ì ¸ìš”.', category: 'í•™ìŠµ', icon: 'ğŸ—“ï¸', completed: false },
                    { time: 'ì˜¤í›„ 6:30', activity: 'ì €ë… ì‹ì‚¬', description: 'í•œ ì£¼ë¥¼ ë§ˆë¬´ë¦¬í•˜ëŠ” ì €ë… ì‹ì‚¬ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ï¿½', completed: false },
                    { time: 'ì˜¤í›„ 7:30', activity: 'ëª©ìš• ë° ê°œì¸ ìœ„ìƒ', description: 'ê°œìš´í•˜ê²Œ ëª©ìš•í•˜ê³  ëª¸ì„ ê¹¨ë—í•˜ê²Œ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ›', completed: false },
                    { time: 'ì˜¤í›„ 8:00', activity: 'íœ´ì‹ ë° ì·¨ì¹¨ ì¤€ë¹„', description: 'í¸ì•ˆí•˜ê²Œ ì‰¬ë©´ì„œ ì ìë¦¬ì— ë“¤ ì¤€ë¹„ë¥¼ í•´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ì”»ê¸°', completed: false },
                    { time: 'ì˜¤í›„ 9:00', activity: 'ì·¨ì¹¨', description: 'ë‚´ì¼ì„ ìœ„í•´ ì¼ì° ì ìë¦¬ì— ë“¤ì–´ìš”.', category: 'ê¸°ë³¸ìƒí™œ', icon: 'ğŸ˜´', completed: false }
                ]
            };
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ìŠ¤ì¼€ì¤„ ë°ì´í„°ë¥¼ ë¡œë“œ
            function loadScheduleState() {
                const savedData = localStorage.getItem('childScheduleData');
                if (savedData) {
                    try {
                        const parsedData = JSON.parse(savedData);
                        // Make sure the loaded data structure is compatible with new 'í† ', 'ì¼' days
                        if (parsedData['ì£¼ë§'] && !parsedData['í† '] && !parsedData['ì¼']) {
                            // Simple migration: distribute 'ì£¼ë§' items to 'í† ' and 'ì¼' evenly
                            const weekendItems = parsedData['ì£¼ë§'];
                            const saturdayItems = [];
                            const sundayItems = [];
                            for(let i = 0; i < weekendItems.length; i++) {
                                if (i % 2 === 0) { // Distribute evenly
                                    saturdayItems.push(weekendItems[i]);
                                } else {
                                    sundayItems.push(weekendItems[i]);
                                }
                            }
                            scheduleData['í† '] = saturdayItems;
                            scheduleData['ì¼'] = sundayItems;
                            delete parsedData['ì£¼ë§']; // Remove old 'ì£¼ë§' entry

                            // Re-save to ensure the new structure is in local storage for next load
                            localStorage.setItem('childScheduleData', JSON.stringify(scheduleData));
                            console.warn("ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì˜ 'ì£¼ë§' ìŠ¤ì¼€ì¤„ ë°ì´í„°ê°€ 'í† 'ì™€ 'ì¼'ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ë˜ì—ˆìŠµë‹ˆë‹¤.");
                        } else {
                            // If 'í† ' or 'ì¼' already exist, assume data is already migrated or new.
                            // Simply assign parsedData to scheduleData for updates.
                            Object.assign(scheduleData, parsedData);
                        }
                        
                        // Ensure 'persistentAlert' property exists for new morning activities if not loaded from saved data
                        ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ'].forEach(day => {
                            if (scheduleData[day]) {
                                scheduleData[day].forEach(item => {
                                    if (item.time === 'ì˜¤ì „ 7:40' || item.time === 'ì˜¤ì „ 8:15') {
                                        if (item.persistentAlert === undefined) { // Only set if not already defined
                                            item.persistentAlert = true;
                                        }
                                    }
                                });
                            }
                        });


                    } catch (e) {
                        console.error('Local storage ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜:', e); 
                        // Fallback to default scheduleData if parsing fails
                        scheduleData = { /* default data will be used from the script directly */ };
                        console.warn('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë°ì´í„° íŒŒì‹± ì‹¤íŒ¨, ê¸°ë³¸ ìŠ¤ì¼€ì¤„ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
                    }
                } 
            }

            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ìŠ¤ì¼€ì¤„ ë°ì´í„°ë¥¼ ì €ì¥
            function saveScheduleState() {
                localStorage.setItem('childScheduleData', JSON.stringify(scheduleData));
            }

            const categoryColors = {
                'ì¹˜ë£Œ': '#FF7F50', // Coral
                'í•™ìŠµ': '#6495ED', // CornflowerBlue
                'ë…ì„œ': '#8A2BE2', // BlueViolet
                'ë†€ì´': '#3CB371', // MediumSeaGreen
                'íœ´ì‹': '#FFD700', // Gold
                'ê¸°ë³¸ìƒí™œ': '#A9A9A9', // DarkGray
                'ì™¸ë¶€ìˆ˜ì—…': '#DC143C' // Crimson
            };
            
            const categoryBorders = {
                'ì¹˜ë£Œ': 'border-orange-400',
                'í•™ìŠµ': 'border-blue-500',
                'ë…ì„œ': 'border-purple-500',
                'ë†€ì´': 'border-teal-500',
                'íœ´ì‹': 'border-yellow-400',
                'ê¸°ë³¸ìƒí™œ': 'border-gray-400',
                'ì™¸ë¶€ìˆ˜ì—…': 'border-red-400'
            };

            const scheduleContent = document.getElementById('schedule-content'); // Left panel schedule content area
            const exploreScheduleContent = document.getElementById('schedule-content-explore'); // Right panel explore schedule content area
            // const dayTabsContainer = document.getElementById('day-tabs'); // 'ì˜¤ëŠ˜ì˜ ì¼ì •' ìš”ì¼ íƒ­ ì œê±°ë¨
            const exploreDayTabsContainer = document.getElementById('explore-day-tabs'); // Right panel explore day tabs container

            const weeklyAnalysisTab = document.getElementById('weekly-analysis-tab');
            const dailyAnalysisTab = document.getElementById('daily-analysis-tab');
            const weeklyAnalysisContent = document.getElementById('weekly-analysis-content');
            const dailyAnalysisContent = document.getElementById('daily-analysis-content');
            const currentDayDisplay = document.getElementById('current-day-display');
            const currentTimeDisplay = document.getElementById('current-time-display');


            let weeklyActivityChart = null; // ì£¼ê°„ í™œë™ ë¶„ì„ ì°¨íŠ¸
            let dailyActivityChart = null; // ì¼ê°„ í™œë™ ë¶„ì„ ì°¨íŠ¸
            let currentActiveDay = 'ì›”'; // Default active day for left panel (today's schedule)
            let currentExploredDay = 'ì›”'; // Default explored day for right panel's schedule exploration and daily analysis
            let lastAnnouncedActivity = null; // ë§ˆì§€ë§‰ìœ¼ë¡œ ìŒì„± ì•ˆë‚´ëœ í™œë™

            // Fireworks Canvas setup
            const fireworksCanvas = document.getElementById('fireworksCanvas');
            const fireworksCtx = fireworksCanvas.getContext('2d');
            let particles = [];

            function setCanvasSize() {
                fireworksCanvas.width = window.innerWidth;
                fireworksCanvas.height = window.innerHeight;
            }

            setCanvasSize();
            window.addEventListener('resize', setCanvasSize);

            function Particle(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.velocity = {
                    x: (Math.random() - 0.5) * 15, 
                    y: (Math.random() - 0.5) * 15
                };
                this.alpha = 1;
                this.friction = 0.97; 
                this.gravity = 0.05; 
                this.radius = Math.random() * 5 + 2; 
            }

            Particle.prototype.draw = function() {
                fireworksCtx.save();
                fireworksCtx.globalAlpha = this.alpha;
                fireworksCtx.beginPath();
                fireworksCtx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
                fireworksCtx.fillStyle = this.color;
                fireworksCtx.fill();
                fireworksCtx.restore();
            };

            Particle.prototype.update = function() {
                this.velocity.x *= this.friction;
                this.velocity.y *= this.friction;
                this.velocity.y += this.gravity;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha -= 0.015; 
                if (this.alpha < 0) this.alpha = 0;
                this.draw();
            };

            function createFireworks(x, y) {
                const colors = ['#FFD700', '#FF4500', '#ADFF2F', '#1E90FF', '#FF69B4', '#DAA520'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                const particleCount = 80 + Math.floor(Math.random() * 70); 

                for (let i = 0; i < particleCount; i++) {
                    particles.push(new Particle(x, y, color));
                }
            }

            function animateFireworks() {
                requestAnimationFrame(animateFireworks);
                fireworksCtx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);

                for (let i = particles.length - 1; i >= 0; i--) {
                    particles[i].update();
                    if (particles[i].alpha <= 0.1) {
                        particles.splice(i, 1);
                    }
                }
            }
            animateFireworks();

            let clapSynth; 
            let reverb; 

            async function setupAudio() {
                if (Tone.context.state !== 'running') {
                    await Tone.start();
                }

                reverb = new Tone.Reverb({
                    decay: 3,      
                    preDelay: 0.02 
                }).toDestination(); 

                clapSynth = new Tone.NoiseSynth({
                    noise: {
                        type: "white"
                    },
                    envelope: {
                        attack: 0.01,   
                        decay: 0.8,     
                        sustain: 0.0,
                        release: 1.0    
                    }
                }).connect(reverb); 
            }

            function playClapSound() {
                if (!clapSynth || !reverb) {
                    setupAudio().then(() => {
                        if (clapSynth) clapSynth.triggerAttackRelease("2n"); 
                    });
                } else {
                    clapSynth.triggerAttackRelease("2n"); 
                }
            }

            function speak(text) {
                if ('speechSynthesis' in window) {
                    if (window.speechSynthesis.speaking) {
                        window.speechSynthesis.cancel();
                    }
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'ko-KR';
                    window.speechSynthesis.speak(utterance);
                } else {
                    console.warn('Text-to-speech not supported in this browser.');
                }
            }

            function parseTime(timeStr) {
                const [ampm, time] = timeStr.split(' ');
                let [hours, minutes] = time.split(':').map(Number);
                if (ampm === 'ì˜¤í›„' && hours !== 12) {
                    hours += 12;
                } else if (ampm === 'ì˜¤ì „' && hours === 12) {
                    hours = 0;
                }
                return { hours, minutes, seconds: 0 }; // Ensure seconds are 0 for consistent comparison
            }

            function updateCurrentActivityHighlight() {
                const now = new Date();
                const currentSystemDayIndex = now.getDay();
                const daysOfWeek = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
                let systemDeterminedDay = daysOfWeek[currentSystemDayIndex];

                // Update current date/time display
                const today = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                currentDayDisplay.textContent = today.toLocaleDateString('ko-KR', options);
                currentTimeDisplay.textContent = today.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit', hour12: false });


                // Automatically set currentActiveDay based on system time
                currentActiveDay = systemDeterminedDay;
                // Since day tabs for 'ì˜¤ëŠ˜ì˜ ì¼ì •' are removed, we just need to ensure the correct schedule is rendered
                // This call might be redundant if `renderSchedule` is called on DOMContentLoaded,
                // but it ensures the active schedule stays in sync if the day changes while the app is open.
                // However, `renderSchedule` is also called by initial load, so we only need to re-render if the *day itself* changes.
                // The `renderTabs` function (which would implicitly call renderSchedule for the active tab) is no longer doing this for 'ì˜¤ëŠ˜ì˜ ì¼ì •'
                // So, let's explicitly call `renderSchedule` here to ensure it's always up-to-date with the current day.
                renderSchedule(currentActiveDay);


                const currentSchedule = scheduleData[currentActiveDay];
                if (!currentSchedule) {
                     lastAnnouncedActivity = null;
                     return;
                }

                document.querySelectorAll('#schedule-content .timeline-item').forEach(item => {
                    item.classList.remove('current-activity');
                });

                let foundCurrent = false;
                let currentActivityElementToScroll = null;

                for (let i = 0; i < currentSchedule.length; i++) {
                    const item = currentSchedule[i];
                    
                    let startTimeHours, startTimeMinutes;
                    if (item.time.includes('ì˜¤ì „') || item.time.includes('ì˜¤í›„')) {
                        const parsed = parseTime(item.time);
                        startTimeHours = parsed.hours;
                        startTimeMinutes = parsed.minutes;
                    } else {
                        // Skip if no specific time, as time-based highlighting needs time
                        continue; 
                    }

                    const startDateTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), startTimeHours, startTimeMinutes, 0); 

                    let endDateTime;
                    if (i + 1 < currentSchedule.length) {
                        const nextItem = currentSchedule[i+1];
                        if (nextItem.time.includes('ì˜¤ì „') || nextItem.time.includes('ì˜¤í›„')) {
                            const nextStartTime = parseTime(nextItem.time);
                            endDateTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), nextStartTime.hours, nextStartTime.minutes, 0); 
                        } else {
                            endDateTime = new Date(startDateTime.getTime() + 60 * 60 * 1000); 
                        }
                    } else {
                        const bedTime = parseTime('ì˜¤í›„ 10:00'); 
                        const bedDateTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), bedTime.hours, bedTime.minutes, 0);
                        endDateTime = new Date(startDateTime.getTime() + 60 * 60 * 1000); 
                        if (endDateTime.getTime() > bedDateTime.getTime()) { 
                             endDateTime = bedDateTime;
                        }
                    }
                    
                    if (now >= startDateTime && now < endDateTime) {
                        const scheduleElements = document.querySelectorAll('#schedule-content .timeline-item');
                        const currentActivityElement = Array.from(scheduleElements).find(el => parseInt(el.dataset.index) === i);

                        if (currentActivityElement) {
                            currentActivityElement.classList.add('current-activity');
                            currentActivityElementToScroll = currentActivityElement; 
                            
                            const isPersistentAlertActivity = (item.persistentAlert && !item.completed); // Check if it's a persistent alert AND not completed

                            if (isPersistentAlertActivity) {
                                // Persistent alert: always speak if not completed
                                speak(`${item.activity} ì‹œì‘í•  ì‹œê°„ì´ì—ìš”.`);
                                // Do not update lastAnnouncedActivity for persistent alerts to ensure it keeps repeating
                            } else if (lastAnnouncedActivity !== item.activity) {
                                // One-time alert: speak only if new activity and not completed
                                if (!item.completed) {
                                    speak(`${item.activity} ì‹œì‘í•  ì‹œê°„ì´ì—ìš”.`);
                                    lastAnnouncedActivity = item.activity;
                                }
                            }
                            foundCurrent = true;
                        }
                        // Break if current activity found, as we only highlight one.
                        // The repetition for persistent alerts is handled by not updating lastAnnouncedActivity for those specific items.
                        break; 
                    }
                }

                if (foundCurrent && currentActivityElementToScroll) {
                    currentActivityElementToScroll.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    lastAnnouncedActivity = null; 
                }
            }

            function createScheduleItemHtml(item, day, index, isExploreView = false) {
                const borderColor = categoryBorders[item.category] || 'border-gray-200';
                const completedClass = item.completed && !isExploreView ? 'completed-activity' : ''; 
                const checkboxHtml = isExploreView ? '' : `<input type="checkbox" id="activity-${day}-${index}" class="activity-checkbox h-5 w-5 text-teal-600 border-gray-300 rounded focus:ring-teal-500" ${item.completed ? 'checked' : ''}>`;

                let iconContent;
                if(item.icon === 'ì”»ê¸°') { 
                    iconContent = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#A4C3B2]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a5 5 0 010-7.07m7.072 0a5 5 0 010 7.07M12 6v2m0 8v2m-6.364-2.364l1.414-1.414M18.364 12l-1.414 1.414m-10.102-5.05l1.414 1.414M16.95 16.95l-1.414-1.414" /></svg>`;
                } else { 
                    iconContent = `<span class="text-2xl text-[#A4C3B2]">${item.icon}</span>`;
                }

                return `
                    <div class="relative flex items-center gap-4 timeline-item border-l-4 ${borderColor} pl-6 pr-4 py-3 rounded-lg transition-all duration-300 ${completedClass}" data-index="${index}">
                        <div class="absolute -left-3.5 top-1/2 -translate-y-1/2 flex items-center justify-center w-8 h-8 rounded-full bg-white ring-4 ring-[#A4C3B2]">
                            ${iconContent}
                        </div>
                        ${checkboxHtml}
                        <div class="flex-1 activity-text">
                            <p class="text-sm text-gray-500">${item.time}</p>
                            <h3 class="font-bold text-lg text-gray-800">${item.activity}</h3>
                            <p class="text-gray-600 text-sm">${item.description}</p>
                        </div>
                    </div>
                `;
            }

            function renderSchedule(day) {
                scheduleContent.innerHTML = ''; 
                const daySchedule = scheduleData[day];
                if (!daySchedule) return; 

                daySchedule.forEach((item, index) => {
                    const itemDiv = document.createElement('div');
                    itemDiv.innerHTML = createScheduleItemHtml(item, day, index, false); 
                    scheduleContent.appendChild(itemDiv.firstElementChild); 

                    const checkbox = itemDiv.firstElementChild.querySelector(`#activity-${day}-${index}`);
                    if (checkbox) {
                        checkbox.addEventListener('change', (e) => {
                            item.completed = e.target.checked;
                            saveScheduleState(); 
                            if (item.completed) {
                                itemDiv.firstElementChild.classList.add('completed-activity');
                                const rect = itemDiv.firstElementChild.getBoundingClientRect();
                                createFireworks(rect.left + rect.width / 2, rect.top + rect.height / 2);
                                playClapSound();
                            } else {
                                itemDiv.firstElementChild.classList.remove('completed-activity');
                            }
                            renderWeeklyChart(); 
                            // If a persistent alert activity is completed, clear lastAnnouncedActivity for immediate re-evaluation
                            if (item.persistentAlert) { 
                                lastAnnouncedActivity = null;
                                updateCurrentActivityHighlight(); // Re-evaluate immediately
                            }
                        });
                    }
                });
                updateCurrentActivityHighlight(); 
            }

            let activeExploreDay = null; 

            function renderExploreSchedule(day) {
                exploreScheduleContent.innerHTML = '';
                const daySchedule = scheduleData[day];

                if (!daySchedule || daySchedule.length === 0) {
                    const noScheduleMessage = document.createElement('p');
                    noScheduleMessage.className = 'text-center text-gray-500 py-8';
                    noScheduleMessage.textContent = `${day}ì—ëŠ” íŠ¹ë³„í•œ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.`;
                    exploreScheduleContent.appendChild(noScheduleMessage);
                } else {
                    daySchedule.forEach((item, index) => {
                        const itemDiv = document.createElement('div');
                        itemDiv.innerHTML = createScheduleItemHtml(item, day, index, true); 
                        exploreScheduleContent.appendChild(itemDiv.firstElementChild);
                    });
                }
                currentExploredDay = day; 
                renderDailyChart(currentExploredDay); 
            }

            function renderTabs() {
                const days = Object.keys(scheduleData);
                // `dayTabsContainer`ëŠ” ì´ì œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì œê±°í•©ë‹ˆë‹¤.
                // if (!dayTabsContainer) {
                //     console.error("ì˜¤ë¥˜: ID 'day-tabs'ë¥¼ ê°€ì§„ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!"); 
                //     return; 
                // }
                // dayTabsContainer.innerHTML = '';
                // (ìë™ ìš”ì¼ ì„ íƒìœ¼ë¡œ ë³€ê²½ë˜ì–´ ì´ ë¶€ë¶„ì˜ ìš”ì¼ íƒ­ ë Œë”ë§ ë¡œì§ ì œê±°)

                if (!exploreDayTabsContainer) {
                    console.error("ì˜¤ë¥˜: ID 'explore-day-tabs'ë¥¼ ê°€ì§„ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!"); 
                    return; 
                }
                exploreDayTabsContainer.innerHTML = '';
                // Render explore tabs in a specific order: ì›”, í™”, ìˆ˜, ëª©, ê¸ˆ, í† , ì¼
                const orderedDays = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
                orderedDays.forEach(day => {
                     // Only render tab if the day exists in scheduleData
                    if (scheduleData[day]) {
                        const tabButton = document.createElement('button');
                        tabButton.textContent = day;
                        // Initially set no active tab for explore, or 'ì›”' as default if desired for visual
                        tabButton.className = `px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 tab-inactive`; 
                        
                        tabButton.addEventListener('click', () => {
                            if (activeExploreDay === day) {
                                exploreScheduleContent.classList.add('hidden'); 
                                tabButton.classList.replace('tab-active', 'tab-inactive'); 
                                activeExploreDay = null; 
                            } else {
                                document.querySelectorAll('#explore-day-tabs button').forEach(btn => {
                                    btn.classList.replace('tab-active', 'tab-inactive');
                                });
                                tabButton.classList.replace('tab-inactive', 'tab-active');
                                exploreScheduleContent.classList.remove('hidden'); 
                                activeExploreDay = day; 
                                renderExploreSchedule(day); 
                            }
                        });
                        exploreDayTabsContainer.appendChild(tabButton);
                    }
                });
            }
            
            function getWeeklyActivityDurations() {
                // ì´ ë¶€ë¶„ì˜ ì‹œê°„ ê³„ì‚°ì€ ìŠ¤ì¼€ì¤„ ë°ì´í„°ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ê³„ì‚°ë˜ê±°ë‚˜,
                // ìŠ¤ì¼€ì¤„ ë°ì´í„°ê°€ ê³ ì •ì ì¼ ê²½ìš° ìˆ˜ë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                // í˜„ì¬ëŠ” ê¸°ì¡´ì— ëª…ì‹œëœ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.
                return {
                    'ì¹˜ë£Œ': 4 * 60, 
                    'í•™ìŠµ': 4 * 60, 
                    'ë…ì„œ': 2.5 * 60, 
                    'ë†€ì´': 5.5 * 60, 
                    'íœ´ì‹': 4 * 60, 
                    'ê¸°ë³¸ìƒí™œ': 9 * 60, 
                    'ì™¸ë¶€ìˆ˜ì—…': 2 * 60 
                };
            }

            function renderWeeklyChart() {
                const ctx = document.getElementById('weeklyActivityChart').getContext('2d');
                const weeklyActivityDurations = getWeeklyActivityDurations();
                const labels = Object.keys(weeklyActivityDurations);
                const data = Object.values(weeklyActivityDurations).map(minutes => parseFloat((minutes / 60).toFixed(1))); 

                if (weeklyActivityChart) {
                    weeklyActivityChart.destroy(); 
                }

                weeklyActivityChart = new Chart(ctx, {
                    type: 'bar', 
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'ì£¼ê°„ í™œë™ ì‹œê°„ (ì‹œê°„)',
                            data: data,
                            backgroundColor: Object.values(categoryColors),
                            borderColor: '#FDFBF8',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'ì‹œê°„ (ì‹œ)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'í™œë™ ìœ í˜•'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false 
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += `${context.parsed.y} ì‹œê°„`;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });

                calculatePraiseStickers();
            }

            function getDailyCategoryDurations(day) {
                const daySchedule = scheduleData[day];
                const durations = {};
                if (!daySchedule) return durations;

                for (const category in categoryColors) {
                    durations[category] = 0;
                }

                for (let i = 0; i < daySchedule.length; i++) {
                    const currentItem = daySchedule[i];
                    let durationMinutes = 0;

                    if (!currentItem.time.includes('ì˜¤ì „') && !currentItem.time.includes('ì˜¤í›„')) {
                        durationMinutes = 15;
                    } else if (i + 1 < daySchedule.length) {
                        const startTime = parseTime(currentItem.time);
                        const nextItem = daySchedule[i+1];
                        if (nextItem.time.includes('ì˜¤ì „') || nextItem.time.includes('ì˜¤í›„')) {
                             const nextStartTime = parseTime(nextItem.time);
                             const currentTotalMinutes = startTime.hours * 60 + startTime.minutes;
                             const nextTotalMinutes = nextStartTime.hours * 60 + nextStartTime.minutes; 
                             durationMinutes = nextTotalMinutes - currentTotalMinutes;
                             if (durationMinutes < 0) { 
                                 durationMinutes += 24 * 60; 
                             }
                        } else {
                            durationMinutes = 60; 
                        }
                    } else {
                        const startTime = parseTime(currentItem.time);
                        const bedTime = parseTime('ì˜¤í›„ 10:00'); 
                        const startTotalMinutes = startTime.hours * 60 + startTime.minutes;
                        const bedTotalMinutes = bedTime.hours * 60 + bedTime.minutes;
                        
                        durationMinutes = Math.max(30, bedTotalMinutes - startTotalMinutes); 
                    }
                    
                    if (durations[currentItem.category] !== undefined) {
                        durations[currentItem.category] += durationMinutes;
                    }
                }

                return durations;
            }

            function renderDailyChart(day) {
                const ctx = document.getElementById('dailyActivityChart').getContext('2d');
                document.getElementById('daily-analysis-day-desc').textContent = `${day} í™œë™ë“¤ì˜ êµ¬ì„± ë¹„ìœ¨ì„ í¼ì„¼íŠ¸ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.`;

                const dailyDurations = getDailyCategoryDurations(day);
                const labels = Object.keys(dailyDurations);
                const data = Object.values(dailyDurations);

                const totalMinutes = data.reduce((sum, current) => sum + current, 0);
                const percentageData = data.map(minutes => totalMinutes > 0 ? parseFloat((minutes / totalMinutes * 100).toFixed(1)) : 0);

                if (dailyActivityChart) {
                    dailyActivityChart.destroy(); 
                }

                dailyActivityChart = new Chart(ctx, {
                    type: 'bar', 
                    data: {
                        labels: labels,
                        datasets: [{
                            label: `${day} í™œë™ ë¹„ìœ¨ (%)`,
                            data: percentageData,
                            backgroundColor: Object.values(categoryColors),
                            borderColor: '#FDFBF8',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100, 
                                title: {
                                    display: true,
                                    text: 'ë¹„ìœ¨ (%)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'í™œë™ ìœ í˜•'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += `${context.parsed.y}%`;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function calculatePraiseStickers() {
                let totalStickers = 0;
                let totalWeeklyActivities = 0;
                let completedWeeklyActivities = 0;

                const daysOfWeekForStickers = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼']; 

                daysOfWeekForStickers.forEach(day => {
                    const daySchedule = scheduleData[day];
                    if (!daySchedule) return;

                    let dayTotalActivities = 0;
                    let dayCompletedActivities = 0;

                    daySchedule.forEach(activity => {
                        dayTotalActivities++;
                        if (activity.completed) {
                            dayCompletedActivities++;
                        }
                    });

                    totalWeeklyActivities += dayTotalActivities;
                    completedWeeklyActivities += dayCompletedActivities;

                    // Apply specific weekday sticker logic
                    if (['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ'].includes(day)) { 
                        const dayCompletionPercentage = dayTotalActivities > 0 ? (dayCompletedActivities / dayTotalActivities * 100) : 0;
                        if (dayCompletionPercentage >= 70) {
                            totalStickers += 1; 
                        }
                        if (dayCompletionPercentage >= 100) {
                            totalStickers += 1; 
                        }
                    }
                });

                totalStickers = Math.min(totalStickers, 10); 

                document.getElementById('total-activities-count-weekly').textContent = totalWeeklyActivities;
                document.getElementById('completed-activities-count-weekly').textContent = completedWeeklyActivities;
                document.getElementById('sticker-count-weekly').textContent = totalStickers;
            }


            // Initial load sequence
            loadScheduleState(); 
            setupAudio(); 
            renderTabs(); 
            // Initial render of schedule for the current day
            const initialDayIndex = new Date().getDay();
            const daysOfWeek = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            currentActiveDay = daysOfWeek[initialDayIndex];
            renderSchedule(currentActiveDay); 
            exploreScheduleContent.classList.add('hidden'); 
            renderWeeklyChart(); 

            // Analysis Tab Switching
            weeklyAnalysisTab.addEventListener('click', () => {
                weeklyAnalysisTab.classList.replace('analysis-tab-inactive', 'analysis-tab-active');
                dailyAnalysisTab.classList.replace('analysis-tab-active', 'analysis-tab-inactive');
                weeklyAnalysisContent.classList.remove('hidden');
                dailyAnalysisContent.classList.add('hidden');
                renderWeeklyChart(); 
            });

            dailyAnalysisTab.addEventListener('click', () => {
                dailyAnalysisTab.classList.replace('analysis-tab-inactive', 'analysis-tab-active');
                weeklyAnalysisTab.classList.replace('analysis-tab-active', 'analysis-tab-inactive');
                dailyAnalysisContent.classList.remove('hidden');
                weeklyAnalysisContent.classList.add('hidden');
                renderDailyChart(currentExploredDay || 'ì›”'); 
            });
            
            // Set up interval for real-time highlighting, voice notification, and current time display
            setInterval(updateCurrentActivityHighlight, 10 * 1000); // Check every 10 seconds
        });
    </script>
</body>
</html>
ï¿½
